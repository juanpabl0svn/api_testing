<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Log In</title>
  </head>
  <body>
    <main id="main">
      <form id="form">
        <input type="text" placeholder="Username" id="username" />
        <input type="text" placeholder="Password" id="password" />
        <input type="submit" value="Enviar" />
      </form>
    </main>

    <script>
      const url = "http://" + window.location.host;

      const $ = (el) => document.getElementById(el);

      const body = $("main");

      const form = $("form");

      const username = $("username");
      const password = $("password");

      async function getData(data) {
        body.innerHTML = "";

        const req = await fetch(url + `/api/db/auth/${data}`);
        const { message } = await req.json();

        const label = document.createElement("label");

        label.innerText = message;

        body.appendChild(label);
      }

      form.onsubmit = (e) => {
        e.preventDefault();
        const data = {
          username: username.value,
          password: password.value,
        };
        getData(JSON.stringify(data));
      };
    </script>
  </body>
</html>
